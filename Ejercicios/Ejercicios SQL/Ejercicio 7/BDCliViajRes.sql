DROP TABLE RESERVAS;
DROP TABLE VIAJES;
DROP TABLE CLIENTESV;
CREATE TABLE VIAJES (
	CODIGO		CHAR(4),
	FECHA_INI	DATE,
	FECHA_FIN	DATE,
	DESTINO		VARCHAR2(20)	NOT NULL,
	PRECIO		NUMBER(7)	NOT NULL,
	PLAZAS		NUMBER(3),
	CONSTRAINT PK_VIAJES PRIMARY KEY (CODIGO));

INSERT INTO VIAJES
VALUES ('A234','12/02/07','25/02/07','MIAMI',57000,90);
INSERT INTO VIAJES
VALUES ('F101','01/01/07','15/01/07','NEW YORK',69000,120);
INSERT INTO VIAJES
VALUES ('J404','15/12/07','31/12/07','LAOS',115000,55);

CREATE TABLE CLIENTESV (
	CODIGO		CHAR(5),
	NOMBRE		VARCHAR2(25),
	DIRECCION	VARCHAR2(30),
	SALDO_DEUDOR	NUMBER,
	CONSTRAINT PK_RESERVAS PRIMARY KEY (CODIGO),
	CONSTRAINT CH_NOMBRE CHECK (NOMBRE=UPPER(NOMBRE)));

INSERT INTO CLIENTESV
VALUES ('34500','LOPEZ','PEZ 4',120000);	
INSERT INTO CLIENTESV
VALUES ('22000','RAMIREZ','PTA. SOL 2',12000);	
INSERT INTO CLIENTESV
VALUES ('12123','SUAREZ','TOLEDO 4',50000);	
INSERT INTO CLIENTESV
VALUES ('23000','GOMEZ','GRAN VIA 25',67000);	
INSERT INTO CLIENTESV
VALUES ('32000','MARTIN','SEGOVIA 8',23000);	
INSERT INTO CLIENTESV
VALUES ('12990','GARCIA','ARENAL 3',0);

CREATE TABLE RESERVAS (
	CODIGO_V	CHAR(4),
	CODIGO_C	CHAR(5),
	FECHA_RES	DATE		NOT NULL,
	NUM_PLAZAS	NUMBER(2)	DEFAULT 1 NOT NULL ,
	CONSTRAINT PK_RES PRIMARY KEY (CODIGO_V,CODIGO_C),
	CONSTRAINT FK1_RES FOREIGN KEY (CODIGO_V)
		REFERENCES VIAJES,
	CONSTRAINT FK2_RES FOREIGN KEY (CODIGO_C)
		REFERENCES CLIENTESV,
	CONSTRAINT CH_PLAZAS CHECK (NUM_PLAZAS<=5));

INSERT INTO RESERVAS
VALUES ('A234','12990','01/03/06',3);
INSERT INTO RESERVAS
VALUES ('F101','34500','12/03/06',4);
INSERT INTO RESERVAS
VALUES ('F101','22000','15/03/06',2);
INSERT INTO RESERVAS
VALUES ('A234','12123','01/03/06',1);
INSERT INTO RESERVAS
VALUES ('A234','34500','3/04/06',2);
INSERT INTO RESERVAS
VALUES ('J404','12990','10/04/06',5);
INSERT INTO RESERVAS
VALUES ('J404','23000','12/04/06',5);
INSERT INTO RESERVAS
VALUES ('A234','22000','12/04/06',3);
INSERT INTO RESERVAS (CODIGO_V,CODIGO_C,FECHA_RES)
VALUES ('F101','32000','22/04/06');
